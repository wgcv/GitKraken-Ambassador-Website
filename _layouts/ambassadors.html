---
layout: default
---
{% assign ambassadors = site.ambassadors %}
{{ambassadors}}
<div class="menu-space">

</div>
<div>
<h1 class="center m-0">Our Ambassadors</h1>
<div id="mapid"  class="dark" style="height: 75vh; "></div>
</div>

<h2 class="center">All of us</h2>
<div class="container">
<div class="d-inline-block w-100">
        {% for ambassador in ambassadors %}
            <div class="list-element">
                <div class="w-100"><img class="avatar" src="{{ ambassador.avatar }}"/></div>

                <div class="list-element-detail">
                    <div class="w-100 center">{{ ambassador.shortname }}</div>
                    <div class="w-100 center">
                        {{ ambassador.city }} - {{ ambassador.country }}
                    </div>
                </div>
            </div>
    {% endfor %}
</div>
</div>
<script>
var mymap = L.map('mapid').setView([15, 15], 2);
var markerIcon = L.icon({
    iconUrl: '{{site.baseurl}}/assets/images/marker.png',
    iconRetinaUrl: '{{site.baseurl}}/assets/images/marker-2x.png',
    iconSize:     [41, 41], // size of the icon
    iconAnchor:   [10, 38], // point of the icon which will correspond to marker's location
    popupAnchor:  [10, -20] // point from which the popup should open relative to the iconAnchor
    });

L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1Ijoid2djdiIsImEiOiJjazNocnhzNGEwMHFhM2VuMW8zbmx4aDZkIn0.I1noSw_DI9HJ8YXrz6tdng'
}).addTo(mymap);
mymap.scrollWheelZoom.disable()

var render = {
    "type": "AmbassadorsCollection",
    "features": [
        {% for ambassador in ambassadors %}

            {
            "type": "Feature",
            "geometry": {
                "type": "Point",
                "coordinates": [
                "{{ ambassador.position.longitude }}",
                "{{ ambassador.position.latitude }}"
                ]
                },
                "properties": {
                "username": "{{ ambassador.username }}",
                "avatar": "{{ ambassador.avatar }}",
                "shortname": "{{ ambassador.shortname }}"
                }
            }
            {% if forloop.last == false %},{% endif %}
        {% endfor %}
    ]
}
render.features.forEach(function(feature){
    console.log(feature);

      L.geoJson(feature, {
        pointToLayer: function (feature, latlng) {
            return L.marker(latlng, {icon: markerIcon});
        },
        onEachFeature: onEachFeature
      }).addTo(mymap);
    });

    function onEachFeature(feature, layer) {
      // does this feature have a property named popupContent?
      if (feature.properties) {
          layer.bindPopup(function(){
            var userstring = "{{site.baseurl}}"+feature.properties.username;
            var popupstring = feature.properties.shortname;
            return "<div class='w-100'><img src='"+feature.properties.avatar+"' class='map-avatar'/></div><a href="+userstring+">"+popupstring+"</a>";
          });
      }
  }

</script>
